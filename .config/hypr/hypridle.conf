# ============================================================================
# Hypridle — Config principale
# ============================================================================

general {
    lock_cmd         = pidof hyprlock || hyprlock   # évite les instances multiples
    before_sleep_cmd = loginctl lock-session        # lock avant suspension
    after_sleep_cmd  = hyprctl dispatch dpms on     # rallume l'écran au réveil
    ignore_dbus_inhibit = false                     # respecte les inhibiteurs
}

# ─── Étape 1 : Dim de l'écran après 3 minutes ──────────────────────────────
listener {
    timeout = 180
    on-timeout = brightnessctl -s set 20%   # sauvegarde + dim à 20%
    on-resume  = brightnessctl -r            # restaure la luminosité d'avant
}

# ─── Étape 2 : Lockscreen après 5 minutes ─────────────────────────────────
listener {
    timeout = 300   # 10 min
    on-timeout = loginctl lock-session
}

# ─── Étape 3 : Écran éteint après 10 minutes ───────────────────────────────
listener {
    timeout = 600
    on-timeout = hyprctl dispatch dpms off
    on-resume  = hyprctl dispatch dpms on
}

# ─── Étape 4 : Suspension après 30 minutes ─────────────────────────────────
listener {
    timeout = 1800  # 30 min
    on-timeout = systemctl suspend
}
